---
sidebar_label: 数据库 MCP 工具箱
title: MCP 工具箱 for 数据库
---

# 数据库 MCP 工具箱

[MCP 数据库工具箱](https://github.com/googleapis/genai-toolbox) 是一个开源的数据库 MCP 服务器。该工具箱在设计时考虑了企业级和生产环境的使用质量。它通过处理连接池、身份验证等复杂问题，使您能够更轻松、快速且安全地开发工具。

工具箱工具可以无缝集成到 Langchain 应用中。有关工具箱的 [入门](https://googleapis.github.io/genai-toolbox/getting-started/local_quickstart_js/) 或 [配置](https://googleapis.github.io/genai-toolbox/getting-started/configure/) 的更多信息，请参阅官方文档：

![架构图](./assets/mcp_db_toolbox.png)

### 配置和部署

工具箱是一个开源服务器，需要您自行部署和管理。有关部署和配置的更多说明，请参阅官方工具箱文档：

- [安装服务器](https://googleapis.github.io/genai-toolbox/getting-started/introduction/#installing-the-server)
- [配置工具箱](https://googleapis.github.io/genai-toolbox/getting-started/configure/)

### 安装客户端 SDK

Langchain 依赖 `@toolbox-sdk/core` 这个 Node 包来使用工具箱。在开始之前，请先安装此包：

```shell
npm install @toolbox-sdk/core
```

### 加载工具箱工具

一旦您的工具箱服务器配置完成并开始运行，就可以使用 SDK 从服务器加载工具：

```javascript
import { ChatVertexAI } from "@langchain/google-vertexai"
import { ToolboxClient } from "@toolbox-sdk/core";
import { tool } from "@langchain/core/tools";
import { createReactAgent } from "@langchain/langgraph/prebuilt";

const model = new ChatVertexAI({
  model: "gemini-2.0-flash",
  temperature: 0,
  maxRetries: 2,
});

// 替换为你的 Toolbox Server URL
const URL = 'http://127.0.0.1:5000';

let client = ToolboxClient(URL);
toolboxTools = await client.loadToolset('toolsetName');

const getTool = (toolboxTool) => tool(toolboxTool, {
    name: toolboxTool.getName(),
    description: toolboxTool.getDescription(),
    schema: toolboxTool.getParamSchema()
});
const tools = toolboxTools.map(getTool);

const agent = createReactAgent({ llm: model, tools });
let inputs = { messages: [{ role: "user", content: "某个查询" }] };
let response = await agent.invoke(inputs);
console.log(response);
```

### 工具箱高级特性

工具箱具备多种功能，使数据库 Gen AI 工具的开发更加无缝。如需了解更多，请查阅以下内容：

- [认证参数](https://googleapis.github.io/genai-toolbox/resources/tools/#authenticated-parameters)：将工具输入自动绑定到 OIDC 令牌中的值，轻松运行敏感查询而不泄露数据
- [授权调用](https://googleapis.github.io/genai-toolbox/resources/tools/#authorized-invocations)：根据用户的身份验证令牌限制工具的使用权限
- [OpenTelemetry](https://googleapis.github.io/genai-toolbox/how-to/export_telemetry/)：通过 [OpenTelemetry](https://opentelemetry.io/docs/) 获取工具箱的指标和追踪信息