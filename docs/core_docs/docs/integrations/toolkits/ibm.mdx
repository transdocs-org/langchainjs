---
sidebar_label: WatsonxToolkit
title: WatsonxToolkit
---

export const quartoRawHtml = [
  `
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GoogleSearch</code></td>
<td>用于搜索在线趋势、新闻、当前事件、实时信息或研究主题。</td>
</tr>
<tr>
<td><code>WebCrawler</code></td>
<td>当你需要对网页内容进行摘要时非常有用。不要用于网页搜索。</td>
</tr>
<tr>
<td><code>SDXLTurbo</code></td>
<td>使用 Stability.ai 从文本生成图像</td>
</tr>
<tr>
<td><code>Weather</code></td>
<td>查询某个城市的天气。</td>
</tr>
<tr>
<td><code>RAGQuery</code></td>
<td>在向量索引中搜索文档。</td>
</tr>
</tbody>
</table>
`,
  `
<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 22%" />
<col style="width: 27%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr>
<th style="text-align: left;">类</th>
<th style="text-align: left;">包</th>
<th style="text-align: center;"><a href="https://python.langchain.com/docs/integrations/tools/ibm_watsonx/">PY 支持</a></th>
<th style="text-align: center;">包最新版本</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><a href="https://api.js.langchain.com/classes/_langchain_community.agents_toolkits_ibm.WatsonxToolkit.html">WatsonxToolkit</a></td>
<td style="text-align: left;"><a href="https://www.npmjs.com/package/@langchain/community"><code>@langchain/community</code></a></td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;"><img src="https://img.shields.io/npm/v/@langchain/community?style=flat-square&amp;label=%20&amp;.png" alt="NPM - 版本" /></td>
</tr>
</tbody>
</table>
`,
];

这将帮助你快速上手使用
[WatsonxToolkit](../../../docs/concepts/#toolkits)。关于 WatsonxToolkit 所有功能和配置的详细文档，请前往 [API 参考文档](https://api.js.langchain.com/modules/_langchain_community.agents_toolkits_ibm.html)。

该工具包包含以下工具：

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[0] }} />

### 集成详情

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[1] }} />

## 准备工作

如果你想获得单个工具运行的自动化追踪，也可以通过取消以下注释来设置你的 [LangSmith](https://docs.smith.langchain.com/) API 密钥：

```typescript
process.env.LANGSMITH_TRACING="true"
process.env.LANGSMITH_API_KEY="your-api-key"
```

### 安装

该工具包位于 `@langchain/community` 包中：

\`{=mdx} import IntegrationInstallTooltip from
“(**mdx_components/integration_install_tooltip.mdx?**)”; import Npm2Yarn
from “(**theme/Npm2Yarn?**)”;

<IntegrationInstallTooltip></IntegrationInstallTooltip>

<Npm2Yarn> (**langchain/community?**) (**langchain/core?**) </Npm2Yarn>
\`

## 实例化

现在我们可以实例化我们的工具包：

```typescript
import { WatsonxToolkit } from "@langchain/community/agents/toolkits/ibm";
import "dotenv/config";

const toolkit = await WatsonxToolkit.init({
  version: "2024-05-31",
  serviceUrl: process.env.WATSONX_AI_SERVICE_URL,
});
```

```text
[Module: null prototype] { default: {} }
```

## 工具

查看可用的工具：

```typescript
const tools = toolkit.getTools();

console.log(
  tools.map((tool) => ({
    name: tool.name,
    description: tool.description,
  }))
);
```

```text
[
 {
 name: "GoogleSearch",
 description: "搜索在线趋势、新闻、当前事件、实时信息或研究主题。"
 },
 {
 name: "WebCrawler",
 description: "当你需要对网页内容进行摘要时非常有用。不要用于网页搜索。"
 },
 {
 name: "SDXLTurbo",
 description: "使用 Stability.ai 从文本生成图像"
 },
 {
 name: "Weather",
 description: "查询某个城市的天气。"
 },
 {
 name: "RAGQuery",
 description: "在向量索引中搜索文档。"
 }
]
```

关于工具的详细信息，请访问 [watsonx.ai API 文档](https://cloud.ibm.com/apidocs/watsonx-ai#get-utility-agent-tools)

## 在代理中使用

首先，确保你已安装 LangGraph：

```mdx-code-block
<Npm2Yarn>
 @langchain/langgraph
</Npm2Yarn>
```

然后，实例化你将在 React 代理中使用的 LLM：

```typescript
import { ChatWatsonx } from "@langchain/community/chat_models/ibm";

const llm = new ChatWatsonx({
  version: "2024-05-31",
  serviceUrl: process.env.WATSONX_AI_SERVICE_URL,
  model: "ibm/granite-3-8b-instruct",
  projectId: process.env.WATSONX_AI_PROJECT_ID,
});
```

```typescript
import { createReactAgent } from "@langchain/langgraph/prebuilt";

const agent = createReactAgent({ llm, tools });
```

```typescript
const exampleQuery = "2022年谁获得了F1冠军？";

const events = await agent.stream(
  { messages: [{ role: "user", content: exampleQuery }] },
  { streamMode: "values" }
);

for await (const event of events) {
  const lastMsg = event.messages[event.messages.length - 1];
  if (lastMsg.tool_calls?.length) {
    console.dir(lastMsg.tool_calls, { depth: null });
  } else if (lastMsg.content) {
    console.log(lastMsg.content);
  }
}
```

```text
2022年谁获得了F1冠军？
[
 {
 name: "GoogleSearch",
 args: { input: "F1 championship 2022" },
 type: "tool_call",
 id: "chatcmpl-tool-9da3456b9bbc475fb822296fdb8353a8"
 }
]
[{"title":"2022 DRIVER STANDINGS","description":"Official F1® Race Programme · Modern Slavery Statement; Do Not Sell or Share My Personal Information. Formula 1. © 2003-2025 Formula One World Championship ...","url":"https://www.formula1.com/en/results/2022/drivers"},{"title":"2022 Formula One World Championship - Wikipedia","description":"2022 Formula One World Championship · Max Verstappen won his second consecutive World Drivers' Championship driving for Red Bull Racing. · Charles Leclerc ...","url":"https://en.wikipedia.org/wiki/2022_Formula_One_World_Championship"},{"title":"2022 Formula One World Championship - Simple English Wikipedia ...","description":"Max Verstappen, who was the reigning Drivers' Champion, claimed his second title at the Japanese Grand Prix, while his team, Red Bull Racing, achieved their ...","url":"https://simple.wikipedia.org/wiki/2022_Formula_One_World_Championship"},{"title":"Max Verstappen wins the 2022 F1 Drivers World Championship : r ...","description":"Oct 9, 2022 ... One day this guy will win a championship just by finishing the race and celebrating with a world championship lap on the day he won.","url":"https://www.reddit.com/r/sports/comments/xzg8pf/max_verstappen_wins_the_2022_f1_drivers_world/"},{"title":"Red Bull Simulator Championship Edition | F1 Authentics","description":"Based on the livery of the 2022 Oracle Red Bull Racing Championship-winning RB18, this F1 simulator has been expertly engineered and manufactured by Memento ...","url":"https://www.f1authentics.com/products/red-bull-simulator-championship-edition"},{"title":"F1 2022 Drivers Championship without Max Verstappen : r/formula1","description":"Nov 26, 2022 ... 1.1K votes, 65 comments. 5.2M subscribers in the formula1 community. Welcome to r/Formula1, the best independent online Formula 1 community!","url":"https://www.reddit.com/r/formula1/comments/z5cwl7/f1_2022_drivers_championship_without_max/"},{"title":"F1® Sim Racing World Championship 2022","description":"World Championship 2022 Bahrain International Circuit Bahrain International Circuit Race Distance: 29 laps Track Length: 5.412 km","url":"https://f1esports.com/world/results/2022"},{"title":"Our personal F1 2022 Predictions Championship : r/formula1","description":"May 5, 2022 ... F1 2025 Driver Predictions from mathematical model. Leclerc and Sainz predicted to beat Hamilton and Albon. r/formula1 - F1 2025 Driver ...","url":"https://www.reddit.com/r/formula1/comments/uitbbu/our_personal_f1_2022_predictions_championship/"},{"title":"Haas F1 Team Esports announces roster for 2022 F1 Esports Series ...","description":"Sep 13, 2022 ... Haas F1 Team is ready to commence battle in the 2022 F1 Esports Series Pro Championship featuring an updated line-up for this season.","url":"https://www.haasf1team.com/news/haas-f1-team-esports-announces-roster-2022-f1-esports-series-pro-championship"},{"title":"2022 F1 Deconstructors Championship : r/formula1","description":"Nov 22, 2022 ... Congratulations to our 2022 champion Carlos Sainz. Alonso put in a late surge but had to settle for second place. Alfa put in the best effort ...","url":"https://www.reddit.com/r/formula1/comments/z1pkkx/2022_f1_deconstructors_championship/"}]
Max Verstappen 赢得了 2022 年 F1 冠军，他代表 Red Bull Racing 出战。他在日本大奖赛上获得了第二个冠军头衔。
```

## API 参考文档

关于 `WatsonxToolkit` 所有功能和配置的详细文档，请前往 [API 参考文档](https://api.js.langchain.com/modules/_langchain_community.agents_toolkits_ibm.html)。