# Mixedbread AI

`MixedbreadAIEmbeddings` 类使用 [Mixedbread AI](https://mixedbread.ai/) API 来生成文本嵌入。本指南将引导你完成 `MixedbreadAIEmbeddings` 类的设置和使用，帮助你有效地将其集成到你的项目中。

## 安装

要安装 `@langchain/mixedbread-ai` 包，请使用以下命令：

import IntegrationInstallTooltip from "@mdx_components/integration_install_tooltip.mdx";

<IntegrationInstallTooltip></IntegrationInstallTooltip>

```bash npm2yarn
npm install @langchain/mixedbread-ai @langchain/core
```

## 初始化

首先，在 Mixedbread AI 网站上注册并从[此处](https://mixedbread.ai/)获取你的 API 密钥。然后，你可以使用此密钥来初始化 `MixedbreadAIEmbeddings` 类。

你可以将 API 密钥直接传递给构造函数，或者将其设置为环境变量（`MXBAI_API_KEY`）。

### 基本用法

以下是如何创建 `MixedbreadAIEmbeddings` 实例的方法：

```typescript
import { MixedbreadAIEmbeddings } from "@langchain/mixedbread-ai";

const embeddings = new MixedbreadAIEmbeddings({
  apiKey: "YOUR_API_KEY",
  // 可选地指定模型
  // model: "mixedbread-ai/mxbai-embed-large-v1",
});
```

如果未提供 `apiKey`，则会从 `MXBAI_API_KEY` 环境变量中读取它。

## 生成嵌入

### 嵌入单个查询

要为单个文本查询生成嵌入，请使用 `embedQuery` 方法：

```typescript
const embedding = await embeddings.embedQuery(
  "Represent this sentence for searching relevant passages: Is baking fun?"
);
console.log(embedding);
```

### 嵌入多个文档

要为多个文档生成嵌入，请使用 `embedDocuments` 方法。此方法会根据 `batchSize` 参数自动处理批处理：

```typescript
const documents = ["Baking bread is fun", "I love baking"];

const embeddingsArray = await embeddings.embedDocuments(documents);
console.log(embeddingsArray);
```

## 自定义请求

你可以通过传递额外的参数来自定义 SDK。

```typescript
const customEmbeddings = new MixedbreadAIEmbeddings({
  apiKey: "YOUR_API_KEY",
  baseUrl: "...",
  maxRetries: 6,
});
```

## 错误处理

如果未提供 API 密钥且无法在环境变量中找到它，则会抛出错误：

```typescript
try {
  const embeddings = new MixedbreadAIEmbeddings();
} catch (error) {
  console.error(error);
}
```

## 相关内容

- 嵌入模型 [概念指南](/docs/concepts/embedding_models)
- 嵌入模型 [操作指南](/docs/how_to/#embedding-models)