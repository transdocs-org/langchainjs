---
hide_table_of_contents: true
---

import CodeBlock from "@theme/CodeBlock";

# JigsawStack 工具

JigsawStack 工具为你的 Agent 提供以下功能：

- JigsawStackAIScrape：使用高级 AI 抓取网页内容。

- JigsawStackAISearch：执行 AI 驱动的网页搜索并获取高质量结果。

- JigsawStackSpeechToText - 使用 Whisper large V3 AI 模型转录视频和音频文件。

- JigsawStackVOCR - 使用提示词识别、描述和提取图像中的数据。

- JigsawStackTextToSQL - 从文本生成语义正确的 SQL 查询。

## 安装配置

- 注册 [账号](https://jigsawstack.com/dashboard)（免费开始）
- 创建并获取你的 [API 密钥](https://jigsawstack.com/dashboard)

## 凭证设置

```bash
export JIGSAWSTACK_API_KEY="your-api-key"
```

## 独立使用

import IntegrationInstallTooltip from "@mdx_components/integration_install_tooltip.mdx";

<IntegrationInstallTooltip></IntegrationInstallTooltip>

```bash npm2yarn
npm install @langchain/openai
```

```js
import {
  JigsawStackAIScrape,
  JigsawStackAISearch,
  JigsawStackSpeechToText,
  JigsawStackVOCR,
  JigsawStackTextToSQL,
} from "@langchain/jigsawstack";

export const run = async () => {
  // AI 抓取工具
  const aiScrapeTool = new JigsawStackAIScrape({
    params: {
      element_prompts: ["Pro plan"],
    },
  });
  const result = await aiScrapeTool.invoke("https://jigsawstack.com/pricing");

  console.log({ result });

  // AI 搜索工具

  const aiSearchTool = new JigsawStackAISearch();
  const doc = await aiSearchTool.invoke("The leaning tower of pisa");
  console.log({ doc });

  // VOCR 工具

  const vocrTool = new JigsawStackVOCR({
    params: {
      prompt: "详细描述这张图片",
    },
  });
  const data = await vocrTool.invoke(
    "https://rogilvkqloanxtvjfrkm.supabase.co/storage/v1/object/public/demo/Collabo%201080x842.jpg?t=2024-03-22T09%3A22%3A48.442Z"
  );

  console.log({ data });

  // 语音转文字工具
  const sttTool = new JigsawStackSpeechToText();
  await sttTool.invoke(
    "https://rogilvkqloanxtvjfrkm.supabase.co/storage/v1/object/public/demo/Video%201737458382653833217.mp4?t=2024-03-22T09%3A50%3A49.894"
  );

  // 文字转 SQL 工具
  const sqlTool = new JigsawStackTextToSQL({
    params: {
      sql_schema:
        "CREATE TABLE Transactions (transaction_id INT PRIMARY KEY, user_id INT NOT NULL, total_amount DECIMAL(10, 2) NOT NULL, transaction_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP, status VARCHAR(20) DEFAULT 'pending', FOREIGN KEY(user_id) REFERENCES Users(user_id))",
    },
  });

  await sqlTool.invoke(
    "生成一个查询，获取金额超过 10000 的交易，并按创建时间排序"
  );
};
```

## 在 Agent 中使用

```js
import { ChatOpenAI } from "@langchain/openai";
import { initializeAgentExecutorWithOptions } from "langchain/agents";
import {
  JigsawStackAIScrape,
  JigsawStackAISearch,
  JigsawStackVOCR,
  JigsawStackSpeechToText,
  JigsawStackTextToSQL,
} from "@langchain/jigsawstack";

const model = new ChatOpenAI({
  model: "gpt-4o-mini",
  temperature: 0,
});

// 添加需要的工具
const tools = [
  new JigsawStackAIScrape(),
  new JigsawStackAISearch(),
  new JigsawStackVOCR(),
  new JigsawStackSpeechToText(),
  new JigsawStackTextToSQL(),
];

const executor = await initializeAgentExecutorWithOptions(tools, model, {
  agentType: "zero-shot-react-description",
  verbose: true,
});

const res = await executor.invoke({
  input: `Kokkalo Restaurant Santorini`,
});

console.log(res.output);

/*
{
  "query": "Kokkalo Restaurant Santorini",
  "ai_overview": "Kokkalo 餐厅位于圣托里尼的费拉，提供独特的用餐体验，融合了传统希腊美食与现代烹饪潮流。以下是一些关键信息：\n\n- **位置**：位于费罗斯特法尼的主干道上，Kokkalo 周围环绕着风景如画的基克拉泽斯建筑，并可俯瞰爱琴海的壮丽景色。\n- **美食**：餐厅主打正宗的希腊菜肴，采用高品质的本地食材制作，菜单设计旨在激发所有感官体验，融合了多种地中海风味。\n- **氛围**：Kokkalo 拥有时尚现代的装饰，为客人营造了温馨的用餐环境。员工以专业和细致著称，提升了整体用餐体验。\n- **美食体验**：\"Kokkalo\" 在希腊语中意为 \"骨头\"，象征着餐厅美食哲学的坚实基础。客人可以期待一次大胆且令人难忘的美食之旅。\n- **烹饪课程**：Kokkalo 还提供烹饪课程，让游客学习如何制作传统的希腊菜肴，为他们在圣托里尼的时光留下独特的纪念。\n- **联系方式**：\n  - 地址：25 Martiou 街，费拉，圣托里尼 84700，基克拉泽斯，希腊\n  - 电话：+30 22860 25407\n  - 邮箱：reservation@kokkalosantorini.com\n\n更多信息请访问其 [官方网站](https://www.santorini-view.com/restaurants/kokkalo-restaurant/) 或 [Facebook 页面](https://www.facebook.com/kokkalorestaurant/)。",
  "is_safe": true,
  "results": [
    {
      "title": "Kokkalo 餐厅，费罗斯特法尼圣托里尼希腊餐厅",
      "url": "http://www.travel-to-santorini.com/restaurants/firostefani/thebonerestaurant/",
      "description": "详情 联系人：George Grafakos 地址：费罗斯特法尼，费拉小学对面 邮编：84700 城市：圣托里尼 电话：+30 22860 25407 发送邮件",
      "content": null,
      "site_name": "Travel-to-santorini",
      "site_long_name": "travel-to-santorini.com",
      "language": "en",
      "is_safe": true,
      "favicon": "https://t1.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=http://travel-to-santorini.com&size=96"
    }
  ]
}
*/
```

## 相关内容

- 工具 [概念指南](/docs/concepts/tools)
- 工具 [操作指南](/docs/how_to/#tools)