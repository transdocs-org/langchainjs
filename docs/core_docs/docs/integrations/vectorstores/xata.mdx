# Xata

[Xata](https://xata.io) 是一个基于 PostgreSQL 的无服务器数据平台。它提供了类型安全的 TypeScript/JavaScript SDK 用于与数据库交互，并提供了用于管理数据的 UI。

Xata 拥有一个原生的向量类型，可以添加到任意表中，并支持相似性搜索。LangChain 可以直接将向量插入 Xata，并对其执行最近邻查询，这样你就可以在 Xata 上使用所有 LangChain 嵌入（Embeddings）的集成。

## 配置

### 安装 Xata CLI

```bash
npm install @xata.io/cli -g
```

### 创建一个用作向量存储的数据库

在 [Xata UI](https://app.xata.io) 中创建一个新的数据库。你可以随意命名，但在这个示例中我们将使用 `langchain`。  
创建一个表，同样可以随意命名，但我们将使用 `vectors`。通过 UI 添加以下列：

- `content` 类型为 "Text"。用于存储 `Document.pageContent` 的值。
- `embedding` 类型为 "Vector"。使用你计划使用的模型的维度（例如 OpenAI 使用 1536）。
- 其他你想用作元数据的列。这些列的值将从 `Document.metadata` 对象中获取。例如，如果在 `Document.metadata` 对象中存在 `title` 属性，则可以在表中创建一个 `title` 列，它将自动填充对应值。

### 初始化项目

在你的项目中运行：

```bash
xata init
```

然后选择你之前创建的数据库。这一步会生成一个 `xata.ts` 或 `xata.js` 文件，用于定义与数据库交互的客户端。更多关于使用 Xata JavaScript/TypeScript SDK 的细节，请参考 [Xata 入门文档](https://xata.io/docs/getting-started/installation)。

## 使用

import IntegrationInstallTooltip from "@mdx_components/integration_install_tooltip.mdx";

<IntegrationInstallTooltip></IntegrationInstallTooltip>

```bash npm2yarn
npm install @langchain/openai @langchain/community @langchain/core
```

import CodeBlock from "@theme/CodeBlock";

### 示例：使用 OpenAI 和 Xata 作为向量存储的问答聊天机器人

此示例使用 `VectorDBQAChain` 在 Xata 中存储的文档中进行搜索，然后将这些文档作为上下文传递给 OpenAI 模型，以回答用户提出的问题。

import FromDocs from "@examples/indexes/vector_stores/xata.ts";

<CodeBlock language="typescript">{FromDocs}</CodeBlock>

### 示例：带元数据过滤的相似性搜索

此示例展示了如何使用 LangChain.js 和 Xata 实现语义搜索。在运行前，请确保在 Xata 的 `vectors` 表中添加了一个类型为 String 的 `author` 列。

import SimSearch from "@examples/indexes/vector_stores/xata_metadata.ts";

<CodeBlock language="typescript">{SimSearch}</CodeBlock>

## 相关内容

- 向量存储 [概念指南](/docs/concepts/#vectorstores)
- 向量存储 [操作指南](/docs/how_to/#vectorstores)